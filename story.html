<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <meta name="description" content="Share your elder care story with Elderella. Help us build better support for family caregivers by sharing your experiences.">
    <title>Share Your Elder Care Story | Elderella</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@400;700&family=Source+Sans+Pro:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Site Header Component (no promo banner on this page) -->
    <site-header no-promo></site-header>

    <!-- Story Hero Section -->
    <section class="story-hero" id="main-content">
        <div class="container">
            <div class="story-hero-grid">
                <div class="story-hero-content">
                    <h1 class="story-hero-title">Built <em>alongside</em> <br>family caregivers</h1>
                    <p class="story-hero-subtitle">From the very beginning.</p>
                    <p class="story-hero-text">
                        We've conducted 80+ in-depth interviews <a href="#story-form" class="story-link">(and countingâ€”please sign up below)</a> with family caregivers across Canada, the US, and the UK. These conversations help us understand where caregiving really breaks down, how Elderella can help, and where we should focus our efforts.
                    </p>
                    <p class="story-hero-text">
                        Elderella's mission is to <strong>make family caregiving more sustainable and less isolating</strong> by turning scattered care details into a <strong>shared, accessible "caregiver memory"</strong> that helps families coordinate care with confidence.
                    </p>
                    <p class="story-hero-text">
                        In December 2025, we launched our alpha product with family caregivers using Elderella in their real lives.
                    </p>
                    <p class="story-hero-text">
                        Elderella continues to be shaped by daily realities and lived experience.
                    </p>
                </div>
                <div class="story-hero-image">
                    <img
                        src="images/family-photographs.png"
                        srcset="images/family-photographs.png 1x, images/family-photographs@2x.png 2x"
                        width="500"
                        height="611"
                        alt="Family photographs collage"
                        loading="eager"
                        decoding="async"
                    >
                </div>
            </div>
        </div>
    </section>

    <!-- Story Form Section -->
    <section class="story-form-section" id="story-form">
        <div class="container">
            <h2 class="story-form-title">Share your elder care story</h2>
            <p class="story-form-subtitle">How is elder care impacting you? Help us build the support system you need.</p>

            <form class="story-form" action="#" method="POST">
                <div class="story-form-group">
                    <label for="first-name" class="sr-only">Your first name</label>
                    <input type="text" id="first-name" name="first_name" placeholder="Your first name" required>
                </div>

                <div class="story-form-group">
                    <label for="last-name" class="sr-only">Your last name</label>
                    <input type="text" id="last-name" name="last_name" placeholder="Your last name" required>
                </div>

                <div class="story-form-group">
                    <label for="email" class="sr-only">Your email address</label>
                    <input type="email" id="email" name="email" placeholder="Your email address" required>
                </div>

                <div class="story-form-group">
                    <label for="phone" class="sr-only">Your phone number (optional)</label>
                    <input type="tel" id="phone" name="phone" placeholder="Your phone number (optional)">
                </div>

                <div class="story-form-group">
                    <label for="situation" class="sr-only">Your caregiving situation (optional)</label>
                    <textarea id="situation" name="situation" rows="4" placeholder="Your caregiving situation (optional)"></textarea>
                </div>

                <div class="story-form-radio-section">
                    <p class="story-form-radio-label">Who would you prefer to speak with?</p>
                    <div class="story-form-radio-group">
                        <label class="story-form-radio">
                            <input type="radio" name="speaker" value="jacqui">
                            <span class="radio-custom"></span>
                            <span class="radio-text">Jacqui Murphy</span>
                        </label>
                        <label class="story-form-radio">
                            <input type="radio" name="speaker" value="mike">
                            <span class="radio-custom"></span>
                            <span class="radio-text">Mike Kirkup</span>
                        </label>
                        <label class="story-form-radio">
                            <input type="radio" name="speaker" value="no_preference" checked>
                            <span class="radio-custom"></span>
                            <span class="radio-text">No preference</span>
                        </label>
                    </div>
                </div>

                <div class="story-form-checkbox-group">
                    <label class="story-form-checkbox">
                        <input type="checkbox" name="updates" value="yes">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-text">Yes! Please send me Elderella updates.</span>
                    </label>
                </div>

                <button type="submit" class="btn-cta-yellow story-form-submit">Schedule your interview</button>
            </form>
        </div>
    </section>

    <!-- Site Footer Component -->
    <site-footer></site-footer>

    <!-- Web Components -->
    <script src="js/components/site-header.js"></script>
    <script src="js/components/site-footer.js"></script>

    <!-- Form Handler -->
    <script>
        let formSubmitting = false;

        document.querySelector('.story-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            if (formSubmitting) return;
            formSubmitting = true;

            const submitBtn = e.target.querySelector('.story-form-submit');
            const originalBtnText = submitBtn.textContent;
            submitBtn.textContent = 'Processing...';
            submitBtn.disabled = true;

            const formData = {
                firstName: document.getElementById('first-name').value,
                lastName: document.getElementById('last-name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value || '',
                situation: document.getElementById('situation').value || '',
                interviewer: document.querySelector('input[name="speaker"]:checked')?.value || 'no_preference',
                newsletter: document.querySelector('input[name="updates"]').checked
            };

            // Basic phone validation
            if (formData.phone && !/^[\d\s\-\+\(\)]+$/.test(formData.phone)) {
                submitBtn.textContent = 'Invalid phone format';
                submitBtn.disabled = false;
                formSubmitting = false;
                setTimeout(() => {
                    submitBtn.textContent = originalBtnText;
                }, 3000);
                return;
            }

            try {
                const response = await fetch('/api/interview', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (!response.ok) {
                    console.error('Server error:', result.error);
                    submitBtn.textContent = result.error || 'Unable to save information';
                    submitBtn.disabled = false;

                    if (result.error && result.error.includes('phone')) {
                        setTimeout(() => {
                            submitBtn.textContent = originalBtnText;
                            formSubmitting = false;
                        }, 3000);
                    } else {
                        // Redirect to calendar even on server error
                        submitBtn.textContent = 'Redirecting to calendar...';
                        const calendlyUrl = buildCalendlyUrl(formData);
                        setTimeout(() => {
                            window.location.href = calendlyUrl;
                        }, 1500);
                    }
                } else {
                    submitBtn.textContent = 'Success! Redirecting...';
                    const calendlyUrl = buildCalendlyUrl(formData);
                    setTimeout(() => {
                        window.location.href = calendlyUrl;
                    }, 1500);
                }

            } catch (error) {
                console.error('Network error:', error);
                submitBtn.textContent = 'Connection issue - redirecting anyway...';
                const calendlyUrl = buildCalendlyUrl(formData);
                setTimeout(() => {
                    window.location.href = calendlyUrl;
                }, 1500);
            }
        });

        function buildCalendlyUrl(formData) {
            const urls = {
                jacqui: 'https://calendly.com/jacqui-murphy/elderella-caregiver-interview',
                mike: 'https://calendly.com/mike-elderella/elderella-caregiver-interview'
            };

            let baseUrl = formData.interviewer === 'mike' ? urls.mike : urls.jacqui;

            const params = new URLSearchParams({
                name: `${formData.firstName} ${formData.lastName}`,
                email: formData.email
            });

            if (formData.situation) {
                params.append('a1', formData.situation);
            }

            return `${baseUrl}?${params.toString()}`;
        }
    </script>

</body>
</html>
