<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Request permanent deletion of your Elderella account and all associated data. Submit a deletion request in accordance with privacy regulations.">
    <title>Delete Your Account | Elderella</title>
    <link rel="canonical" href="https://www.elderella.com/delete-account">
    <meta property="og:title" content="Delete Your Account | Elderella">
    <meta property="og:description" content="Request permanent deletion of your Elderella account and all associated data. Submit a deletion request in accordance with privacy regulations.">
    <meta property="og:url" content="https://www.elderella.com/delete-account">
    <meta property="og:site_name" content="Elderella">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://www.elderella.com/images/elderella-logo-share.jpg">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Delete Your Account | Elderella">
    <meta name="twitter:description" content="Request permanent deletion of your Elderella account and all associated data. Submit a deletion request in accordance with privacy regulations.">
    <meta name="twitter:url" content="https://www.elderella.com/delete-account">
    <meta name="twitter:image" content="https://www.elderella.com/images/elderella-logo-share.jpg">
    <meta name="twitter:site" content="@ElderellaCare">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400&family=Merriweather+Sans:wght@400;700&family=Source+Sans+Pro:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Site Header Component -->
    <site-header></site-header>

    <!-- Delete Hero Section -->
    <section class="delete-hero" id="main-content">
        <div class="container">
            <h1 class="delete-hero-title">Delete your account</h1>
            <p class="delete-hero-subtitle">Request permanent deletion of your Elderella account and all associated data.</p>
        </div>
    </section>

    <!-- Before You Proceed Section -->
    <section class="delete-before-section">
        <div class="container">
            <div class="delete-content-container">
                <h2 class="delete-before-title">Before you proceed</h2>
                <p class="delete-before-text">We understand that you may need to delete data or your entire Elderella account. Please follow the instructions on this page to submit a request for permanent deletion of your account and all associated data.</p>

                <div class="delete-warning-box">
                    <div class="delete-warning-header">
                        <img
                            src="images/important.png"
                            srcset="images/important.png 1x, images/important@2x.png 2x"
                            width="40"
                            height="40"
                            alt=""
                            class="delete-warning-icon"
                            loading="lazy"
                            decoding="async"
                        >
                        <h3 class="delete-warning-title">Important: This action cannot be undone</h3>
                    </div>
                    <p class="delete-warning-intro">When you delete your account, the following will happen:</p>
                    <ul class="delete-warning-list">
                        <li>Your account will be permanently deactivated</li>
                        <li>All personal information associated with your account will be deleted</li>
                        <li>All elder profiles you manage will be deleted</li>
                        <li>All care team data, notes, and appointments will be permanently removed</li>
                        <li>You will no longer have access to any information stored in Elderella</li>
                    </ul>
                    <p class="delete-warning-note"><strong>If you are a Primary Caregiver:</strong> Deleting your account will also remove access for all care team members to the elder profiles you manage.</p>
                </div>

                <p class="delete-processing-text">Your deletion request will be processed within <strong>30 days</strong> as required by privacy regulations. We will send a confirmation email once the deletion is complete.</p>

                <p class="delete-processing-text">If you have any questions or concerns, please contact us at <a href="mailto:hello@elderella.com">hello@elderella.com</a> before submitting this request.</p>
            </div>
        </div>
    </section>

    <!-- Delete Form Section (Purple Background) -->
    <section class="delete-form-section">
        <div class="container">
            <div class="delete-form-container">
                <h2 class="delete-form-title">Submit deletion request</h2>

                <div id="delete-success-message" class="delete-message delete-message-success" style="display: none;" role="alert" aria-live="polite">
                    <strong>Request submitted successfully.</strong> We will process your account deletion request within 30 days and send you a confirmation email.
                </div>

                <div id="delete-error-message" class="delete-message delete-message-error" style="display: none;" role="alert" aria-live="assertive"></div>

                <form id="deletion-form" class="delete-form">
                    <div class="delete-form-group">
                        <label for="email" class="sr-only">Email address</label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            class="delete-form-input"
                            required
                            placeholder="Your email address"
                        >
                        <p class="delete-form-help">Enter the email address associated with your Elderella account.</p>
                    </div>

                    <div class="delete-form-group">
                        <label class="delete-form-label">What would you like to delete?</label>

                        <div class="delete-radio-group">
                            <div class="delete-radio-card" onclick="selectDeletionType(event, 'full')">
                                <input
                                    type="radio"
                                    id="delete-full"
                                    name="deletion-type"
                                    value="full"
                                    class="delete-radio-input"
                                    required
                                >
                                <label for="delete-full" class="delete-radio-content">
                                    <span class="delete-radio-title">Delete my entire account and all data</span>
                                    <span class="delete-radio-description">Permanently delete your account, all elder profiles, care team data, notes, and appointments.</span>
                                </label>
                            </div>

                            <div class="delete-radio-card" onclick="selectDeletionType(event, 'partial')">
                                <input
                                    type="radio"
                                    id="delete-partial"
                                    name="deletion-type"
                                    value="partial"
                                    class="delete-radio-input"
                                    required
                                >
                                <label for="delete-partial" class="delete-radio-content">
                                    <span class="delete-radio-title">Delete specific data only</span>
                                    <span class="delete-radio-description">Choose which data you want to delete but keep your account active.</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="delete-form-group">
                        <label for="reason" class="delete-form-label">Reason for deletion (optional)</label>
                        <select id="reason" name="reason" class="delete-form-select">
                            <option value="">Select a reason...</option>
                            <option value="no_longer_needed">No longer need the service</option>
                            <option value="privacy_concerns">Privacy concerns</option>
                            <option value="switching_services">Switching to another service</option>
                            <option value="difficult_to_use">Difficult to use</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="delete-form-group">
                        <label for="comments" class="delete-form-label">Additional comments (optional)</label>
                        <textarea
                            id="comments"
                            name="comments"
                            class="delete-form-textarea"
                            placeholder="Please share any additional information that might help us improve our service..."
                        ></textarea>
                    </div>

                    <div class="delete-confirm-group">
                        <input
                            type="checkbox"
                            id="confirm"
                            name="confirm"
                            class="delete-confirm-checkbox"
                            required
                        >
                        <label for="confirm" class="delete-confirm-label">
                            I understand that this action is permanent and cannot be undone. I confirm that I want to delete my Elderella account and all associated data.
                        </label>
                    </div>

                    <button type="submit" class="btn-cta-yellow delete-form-submit" id="submit-btn">
                        Submit deletion request
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Have Questions Section -->
    <section class="questions-section">
        <div class="container">
            <h2 class="questions-title">Have questions or concerns?</h2>
            <p class="questions-text">We want you to feel completely confident using Elderella. <br>Our Privacy Team is here to help you understand how we protect your information.</p>
            <div class="questions-buttons">
                <a href="mailto:privacy@elderella.com" class="btn-purple">Contact our privacy team</a>
                <a href="https://www.elderella.com/privacy" class="btn-purple">Read full privacy policy</a>
            </div>
        </div>
    </section>

    <!-- Site Footer Component -->
    <site-footer></site-footer>

    <!-- Web Components -->
    <script src="js/components/site-header.js"></script>
    <script src="js/components/site-footer.js"></script>

    <script>
        // Handle deletion type selection
        function selectDeletionType(e, type) {
            const fullRadio = document.getElementById('delete-full');
            const partialRadio = document.getElementById('delete-partial');
            const radioCards = document.querySelectorAll('.delete-radio-card');

            // Update radio selection
            if (type === 'full') {
                fullRadio.checked = true;
                partialRadio.checked = false;
            } else {
                fullRadio.checked = false;
                partialRadio.checked = true;
            }

            // Update visual selection
            radioCards.forEach(card => {
                card.classList.remove('selected');
            });
            e.currentTarget.classList.add('selected');
        }

        document.getElementById('deletion-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submit-btn');
            const successMsg = document.getElementById('delete-success-message');
            const errorMsg = document.getElementById('delete-error-message');

            // Hide messages
            successMsg.style.display = 'none';
            errorMsg.style.display = 'none';

            // Get deletion type
            const deletionType = document.querySelector('input[name="deletion-type"]:checked')?.value;

            if (!deletionType) {
                errorMsg.textContent = 'Please select what you would like to delete.';
                errorMsg.style.display = 'block';
                errorMsg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                return;
            }

            // Disable button
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';

            try {
                const formData = {
                    email: document.getElementById('email').value,
                    deletionType: deletionType,
                    reason: document.getElementById('reason').value,
                    comments: document.getElementById('comments').value,
                    confirmed: document.getElementById('confirm').checked
                };

                const response = await fetch('/api/delete-account', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    successMsg.style.display = 'block';
                    document.getElementById('deletion-form').reset();
                    // Reset UI
                    document.querySelectorAll('.delete-radio-card').forEach(card => card.classList.remove('selected'));
                    // Scroll to success message
                    successMsg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    let errorText = 'An error occurred. Please try again or contact support at hello@elderella.com';
                    try {
                        const error = await response.json();
                        errorText = error.error || errorText;
                    } catch (parseError) {
                        // Server returned non-JSON response
                    }
                    errorMsg.textContent = errorText;
                    errorMsg.style.display = 'block';
                    errorMsg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            } catch (error) {
                errorMsg.textContent = 'Unable to submit request. Please try again later or contact us at hello@elderella.com';
                errorMsg.style.display = 'block';
                errorMsg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit deletion request';
            }
        });
    </script>
</body>
</html>
